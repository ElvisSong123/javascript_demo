<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>透明度变化</title>
	<style type="text/css">
		div{
			width:100px;
            height:100px;
            background-color: red;
            opacity:1;

            




		}
	</style>
</head>
<body>
	<div></div>
	<script type="text/javascript">
		var div = document.getElementsByTagName('div')[0];
        div.onmouseover = function(){
        	trans(div,50);

        }
         div.onmouseleave = function(){
        	trans(div,100);
        }
        var timer = null;
        function getStyle(demo,attr){
        	if(window.getComputedStyle){
        		return window.getComputedStyle(demo,null)[attr];
        	}else{
        		return demo.currentStyle[attr];
        	}
        }
       
        function trans(demo,opac){
        	clearInterval(timer);
        	var speed = null;
        	var newopac = null;
        	 timer = setInterval(function(){
        		newopac = parseFloat(getStyle(demo,"opacity")) * 100;
        		speed = (opac - newopac) / 9;
        		speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
        		if(opac == newopac){
        			clearInterval(timer)
        		}else{
        		
        		demo.style.opacity = (newopac + speed) / 100 + "";

        		}

        	},30)
         


        }
	</script>
</body>
</html>